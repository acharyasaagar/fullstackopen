{"version":3,"sources":["components/Toggleable.js","components/Blog.js","components/Notification.js","components/CreateBlog.js","services/auth.js","components/Login.js","components/Signup.js","components/User.js","services/blog.js","components/App.js","index.js"],"names":["Toggleable","React","forwardRef","props","ref","actionButtonLabel","cancelButtonLabel","children","useState","visible","setVisible","showWhenVisible","display","hideWhenVisible","toggleVisibility","useImperativeHandle","style","data-test","onClick","displayName","Blog","blog","deleteBlog","likeBlog","user","blogExpanded","setBlogExpanded","blogRef","useRef","handleToggle","current","className","id","title","role","aria-label","href","url","author","e","a","target","blur","handleLikeBlog","likes","window","confirm","handleDeleteBlog","Notification","err","success","message","CreateBlog","createBlog","setSuccess","setTitle","setUrl","setAuthor","setErr","handleAddBlog","preventDefault","newBlog","setTimeout","console","log","onSubmit","htmlFor","type","name","value","onChange","login","credentials","axios","post","signup","Login","setUser","username","setUsername","password","setPassword","handleLogin","authService","res","Object","assign","data","localStorage","setItem","JSON","stringify","setToken","token","Signup","setName","handleSignup","User","handleLogout","bearerToken","parse","loggedUser","config","headers","Authorization","payload","get","blogId","patch","delete","App","blogs","setBlogs","sortedBlogs","sort","first","second","blogService","concat","blogFormRef","Error","filter","useEffect","getBlogs","getItem","removeItem","showUser","map","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.73f25f16.chunk.js","sourcesContent":["import React, { useState, useImperativeHandle } from 'react'\n\nconst Toggleable = React.forwardRef((props, ref) => {\n  const { actionButtonLabel, cancelButtonLabel, children } = props\n  const [visible, setVisible] = useState(false)\n  const showWhenVisible = { display: visible ? '' : 'none' }\n  const hideWhenVisible = { display: visible ? 'none' : '' }\n\n  const toggleVisibility = () => setVisible(!visible)\n\n  useImperativeHandle(ref, () => ({\n    toggleVisibility,\n    visible,\n  }))\n\n  return (\n    <>\n      <div style={showWhenVisible} data-test=\"togglable-content\">\n        {children}\n        {cancelButtonLabel ? (\n          <button onClick={toggleVisibility}>{cancelButtonLabel}</button>\n        ) : (\n          ''\n        )}\n      </div>\n      <div style={hideWhenVisible}>\n        {actionButtonLabel ? (\n          <button\n            data-test=\"toggle-content-action-show\"\n            onClick={toggleVisibility}\n          >\n            {actionButtonLabel}\n          </button>\n        ) : (\n          ''\n        )}\n      </div>\n    </>\n  )\n})\n\nToggleable.displayName = 'Toggleable'\n\nexport default Toggleable\n","import PropTypes from 'prop-types'\nimport React, { useRef, useState } from 'react'\n\nimport Toggleable from './Toggleable'\n\nconst Blog = props => {\n  const { blog, deleteBlog, likeBlog, user } = props\n  const [blogExpanded, setBlogExpanded] = useState(false)\n  const blogRef = useRef()\n\n  const handleToggle = () => {\n    setBlogExpanded(!blogExpanded)\n    blogRef.current.toggleVisibility()\n  }\n\n  const handleLikeBlog = blog => {\n    return async e => {\n      e.target.blur()\n      await likeBlog(blog.id)\n    }\n  }\n\n  const handleDeleteBlog = blog => {\n    return async () => {\n      const confirmed = window.confirm(`Remove blog: ${blog.title}`)\n      if (confirmed) await deleteBlog(blog.id)\n    }\n  }\n\n  return (\n    <>\n      <div className=\"panel blog\" id={`${blog.id}`}>\n        <div\n          className={` ${blogExpanded ? 'd-none' : 'flex'}`}\n          data-test=\"blog-preview\"\n        >\n          <h3 className=\"title\" data-test=\"blog-preview-title\">\n            {blog.title}\n          </h3>\n          <button\n            onClick={handleToggle}\n            data-test=\"view-blog-button\"\n            id={`view-blog-${blog.id}`}\n          >\n            view blog\n            <span role=\"img\" aria-label=\"blog link\">\n              &nbsp;üîª\n            </span>\n          </button>\n        </div>\n        <Toggleable ref={blogRef}>\n          <section className=\"flex\">\n            <div>\n              <p className=\"title\">{blog.title}</p>\n              <p className=\"url\">\n                <span role=\"img\" aria-label=\"blog link\">\n                  &#128279;&nbsp;\n                </span>\n                <a href={blog.url}>{blog.url}</a>\n              </p>\n              <p className=\"subtitle\">\n                <span> {blog.author} </span>\n                <button\n                  className=\"meta\"\n                  data-test=\"like-blog-button\"\n                  onClick={handleLikeBlog(blog)}\n                >\n                  <span role=\"img\" aria-label=\"blog link\">\n                    &nbsp;&nbsp;&#128420;&nbsp;&nbsp;\n                  </span>\n                  {blog.likes ? blog.likes : 0} likes\n                </button>\n              </p>\n            </div>\n            <div className=\"v-flex\">\n              <button onClick={handleToggle} data-test=\"hide-blog-button\">\n                hide blog\n                <span role=\"img\" aria-label=\"blog link\">\n                  &nbsp;&#128314;\n                </span>\n              </button>\n              {blog.user && user.id === blog.user.id ? (\n                <button\n                  data-test=\"delete-blog-button\"\n                  onClick={handleDeleteBlog(blog)}\n                >\n                  delete\n                  <span role=\"img\" aria-label=\"blog delete\">\n                    &nbsp;&nbsp;&nbsp;üóë\n                  </span>\n                </button>\n              ) : (\n                ''\n              )}\n            </div>\n          </section>\n        </Toggleable>\n      </div>\n    </>\n  )\n}\n\nBlog.propTypes = {\n  blog: PropTypes.object.isRequired,\n  deleteBlog: PropTypes.func.isRequired,\n  likeBlog: PropTypes.func.isRequired,\n  user: PropTypes.object.isRequired,\n}\n\nexport default Blog\n","import React from 'react'\n\nconst Notification = props => {\n  const { err, success } = props\n  return (\n    <div className={`${err ? 'error' : ''} ${success ? 'success' : ''}`}>\n      <p>{err ? err.message : ''}</p>\n      <p>{success ? success.message : ''}</p>\n    </div>\n  )\n}\n\nexport default Notification\n","import PropTypes from 'prop-types'\nimport React, { useState } from 'react'\n\nimport Notification from './Notification'\n\nconst CreateBlog = props => {\n  const { createBlog, setSuccess } = props\n  const [title, setTitle] = useState('')\n  const [url, setUrl] = useState('')\n  const [author, setAuthor] = useState('')\n  const [err, setErr] = useState(null)\n\n  const handleAddBlog = async e => {\n    e.preventDefault()\n    const newBlog = {\n      author,\n      title,\n      url,\n    }\n    try {\n      await createBlog(newBlog)\n      setTitle('')\n      setUrl('')\n      setAuthor('')\n      setSuccess({ message: 'New Blog Created' })\n      setTimeout(() => setSuccess(null), 5000)\n    } catch (err) {\n      console.log(err.message)\n      setTitle('')\n      setUrl('')\n      setAuthor('')\n      setErr({ message: err.message })\n      setTimeout(() => setErr(null), 5000)\n    }\n  }\n\n  const handleTitleChange = e => {\n    setTitle(e.target.value)\n  }\n\n  const handleUrlChange = e => {\n    setUrl(e.target.value)\n  }\n\n  const handleAuthorChange = e => {\n    setAuthor(e.target.value)\n  }\n\n  return (\n    <div>\n      <Notification err={err} />\n      <h4>\n        Create Blog\n        <span role=\"img\" aria-label=\"user emoji\">\n          &nbsp;&nbsp;üìù\n        </span>\n      </h4>\n      <form onSubmit={handleAddBlog} data-test=\"create-blog-form\">\n        <section>\n          <label htmlFor=\"title\">Blog Title:</label>\n          <input\n            data-test=\"blog-title-input\"\n            type=\"text\"\n            name=\"title\"\n            value={title}\n            onChange={handleTitleChange}\n          />\n        </section>\n        <section>\n          <label htmlFor=\"url\">Blog URL: </label>\n          <input\n            data-test=\"blog-url-input\"\n            value={url}\n            type=\"text\"\n            name=\"url\"\n            onChange={handleUrlChange}\n          />\n        </section>\n        <section>\n          <label htmlFor=\"author\">Author: </label>\n          <input\n            data-test=\"blog-author-input\"\n            value={author}\n            type=\"text\"\n            name=\"author\"\n            onChange={handleAuthorChange}\n          />\n        </section>\n        <button type=\"submit\" data-test=\"blog-add-button\">\n          add blog\n          <span role=\"img\" aria-label=\"user emoji\">\n            &nbsp;&nbsp;‚ûï\n          </span>\n        </button>\n      </form>\n    </div>\n  )\n}\n\nCreateBlog.propTypes = {\n  createBlog: PropTypes.func.isRequired,\n  setSuccess: PropTypes.func.isRequired,\n}\n\nexport default CreateBlog\n","import axios from 'axios'\n\nconst baseUrl = '/api/login'\n\nconst login = credentials => axios.post(baseUrl, credentials)\n\nconst signup = credentials => axios.post('/api/users', credentials)\n\nexport default { login, signup }\n","import PropTypes from 'prop-types'\nimport React, { useState } from 'react'\n\nimport authService from '../services/auth'\n\nimport Notification from './Notification'\n\nconst Login = props => {\n  const { setUser } = props\n\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [err, setErr] = useState(null)\n\n  const handlePasswordChange = e => {\n    setPassword(e.target.value)\n  }\n  const handleUsernameChange = e => {\n    setUsername(e.target.value)\n  }\n\n  const handleLogin = async e => {\n    e.preventDefault()\n    try {\n      const res = await authService.login({ username, password })\n      const user = Object.assign({}, res.data)\n      window.localStorage.setItem('loggedUser', JSON.stringify(user))\n      setUser(user)\n      authService.setToken(user.token)\n    } catch (e) {\n      setErr({ message: 'Invalid Credentials' })\n      setTimeout(() => setErr(null), 5000)\n    }\n  }\n\n  return (\n    <div className=\"panel\">\n      <Notification err={err} success={null} />\n      <h4>Login to application</h4>\n      <form onSubmit={handleLogin}>\n        <section>\n          <label htmlFor=\"username\">Username: </label>\n          <input\n            type=\"text\"\n            name=\"username\"\n            data-test=\"login-username-input\"\n            value={username}\n            onChange={handleUsernameChange}\n          />\n        </section>\n        <section>\n          <label htmlFor=\"password\">Password: </label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            data-test=\"login-password-input\"\n            value={password}\n            onChange={handlePasswordChange}\n          />\n        </section>\n        <button type=\"submit\" data-test=\"login-button\">\n          Log in\n        </button>\n      </form>\n    </div>\n  )\n}\n\nLogin.propTypes = {\n  setUser: PropTypes.func.isRequired,\n}\n\nexport default Login\n","import PropTypes from 'prop-types'\nimport React, { useState } from 'react'\n\nimport authService from '../services/auth'\n\nimport Notification from './Notification'\n\nconst Signup = props => {\n  const { setUser } = props\n\n  const [name, setName] = useState('')\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [err, setErr] = useState(null)\n\n  const handlePasswordChange = e => setPassword(e.target.value)\n  const handleUsernameChange = e => setUsername(e.target.value)\n  const handleNameChange = e => setName(e.target.value)\n\n  const handleSignup = async e => {\n    e.preventDefault()\n    try {\n      const res = await authService.signup({ name, username, password })\n      const user = Object.assign({}, res.data)\n      window.localStorage.setItem('loggedUser', JSON.stringify(user))\n      setUser(user)\n      authService.setToken(user.token)\n    } catch (e) {\n      setErr({ message: 'Signup Failed' })\n      setTimeout(() => setErr(null), 5000)\n    }\n  }\n\n  return (\n    <div className=\"panel\">\n      <Notification err={err} success={null} />\n      <h4>New user?</h4>\n      <h4>Create a new Account from here</h4>\n      <form onSubmit={handleSignup}>\n        <section>\n          <label htmlFor=\"name\">Name:</label>\n          <input\n            type=\"text\"\n            name=\"name\"\n            data-test=\"signup-name-input\"\n            value={name}\n            onChange={handleNameChange}\n          />\n        </section>\n        <section>\n          <label htmlFor=\"username\">Username: </label>\n          <input\n            type=\"text\"\n            name=\"username\"\n            data-test=\"signup-username-input\"\n            value={username}\n            onChange={handleUsernameChange}\n          />\n        </section>\n        <section>\n          <label htmlFor=\"password\">Password: </label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            data-test=\"signup-password-input\"\n            value={password}\n            onChange={handlePasswordChange}\n          />\n        </section>\n        <button type=\"submit\" data-test=\"signup-button\">\n          Sign up\n        </button>\n      </form>\n    </div>\n  )\n}\n\nSignup.propTypes = {\n  setUser: PropTypes.func.isRequired,\n}\n\nexport default Signup\n","import PropTypes from 'prop-types'\nimport React from 'react'\n\nconst User = props => {\n  const { user, handleLogout } = props\n  return (\n    <div className=\"flex panel\">\n      <p className=\"subtitle\">\n        <span role=\"img\" aria-label=\"user emoji\">\n          üë§&nbsp;&nbsp;\n        </span>\n        Logged in as: <span className=\"title\"> {user.username}</span>\n      </p>\n      <button id=\"logout-button\" onClick={handleLogout}>\n        logout\n      </button>\n    </div>\n  )\n}\n\nUser.propTypes = {\n  user: PropTypes.object.isRequired,\n  handleLogout: PropTypes.func.isRequired,\n}\n\nexport default User\n","import axios from 'axios'\n\nconst baseUrl = '/api/blogs'\n\nconst token = () => JSON.parse(window.localStorage.loggedUser).token\n\nconst bearerToken = () => `bearer ${token()}`\n\nconst config = () => ({\n  headers: {\n    Authorization: bearerToken(),\n  },\n})\n\nconst getAll = () => axios.get(baseUrl)\n\nconst create = payload => axios.post(baseUrl, payload, config())\n\nconst like = blogId => axios.patch(`${baseUrl}/${blogId}`, { likes: 'like' })\n\nconst remove = blogId => axios.delete(`${baseUrl}/${blogId}`, config())\n\nconst update = (payload, blogId) =>\n  axios.put(`${baseUrl}/${blogId}`, payload, config())\n\nexport default { create, getAll, like, remove, update }\n","import React, { useState, useEffect, useRef } from 'react'\n\nimport Blog from './Blog'\nimport CreateBlog from './CreateBlog'\nimport Login from './Login'\nimport Notification from './Notification'\nimport Signup from './Signup'\nimport User from './User'\n\nimport blogService from '../services/blog'\nimport Toggleable from './Toggleable'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [user, setUser] = useState(null)\n  const [err, setErr] = useState(null)\n  const [success, setSuccess] = useState(null)\n\n  const sortedBlogs = blogs.sort((first, second) => second.likes - first.likes)\n\n  const checkLoggedUser = () => {\n    const user = window.localStorage.getItem('loggedUser')\n    setUser(JSON.parse(user))\n  }\n  const populateBlogs = () => {\n    async function getBlogs() {\n      const blogs = await blogService.getAll()\n      setBlogs([...blogs.data])\n    }\n    getBlogs()\n  }\n  const createBlog = async blog => {\n    try {\n      const { data } = await blogService.create(blog)\n      setBlogs(blogs.concat(data))\n      blogFormRef.current.toggleVisibility()\n    } catch (err) {\n      throw new Error('Error creating blog')\n    }\n  }\n\n  const likeBlog = async blogId => {\n    try {\n      const { data } = await blogService.like(blogId)\n      setBlogs(blogs.filter(blog => blog.id !== blogId).concat(data))\n    } catch (err) {\n      console.log(err)\n      setErr({ message: 'Error liking blog' })\n      setTimeout(() => setErr(null), 5000)\n    }\n  }\n\n  // const updateBlog = async (updatedBlog, blogId) => {\n  //   try {\n  //     const { data } = await blogService.update(updatedBlog, blogId)\n  //     setBlogs(blogs.filter(blog => blog.id !== blogId).concat(data))\n  //   } catch (err) {\n  //     console.log(err)\n  //     setErr({ message: 'Error updating blog' })\n  //     setTimeout(() => setErr(null), 5000)\n  //   }\n  // }\n\n  const deleteBlog = async blogId => {\n    try {\n      await blogService.remove(blogId)\n      setBlogs(blogs.filter(blog => blog.id !== blogId))\n    } catch (err) {\n      console.log(err)\n      setErr({ message: 'Error deleting blog' })\n      setTimeout(() => setErr(null), 5000)\n    }\n  }\n\n  useEffect(populateBlogs, [])\n  useEffect(checkLoggedUser, [])\n\n  const blogFormRef = useRef()\n\n  const handleLogout = () => {\n    window.localStorage.removeItem('loggedUser')\n    setUser(null)\n  }\n\n  const loginForm = () => (\n    <>\n      <Toggleable actionButtonLabel=\"log in\" cancelButtonLabel=\"cancel\">\n        <Login setUser={setUser} />\n      </Toggleable>\n      <Toggleable actionButtonLabel=\"sign up\" cancelButtonLabel=\"cancel\">\n        <Signup setUser={setUser} />\n      </Toggleable>\n    </>\n  )\n\n  const showUser = user => <User user={user} handleLogout={handleLogout} />\n\n  return (\n    <>\n      <Notification err={err} success={success} />\n      {user === null ? loginForm() : showUser(user)}\n      <br></br>\n      <br></br>\n      {user === null ? (\n        ''\n      ) : (\n        <>\n          <h2>\n            <span role=\"img\" aria-label=\"blog emoji\">\n              üìã&nbsp;&nbsp;\n            </span>\n            Blogs\n          </h2>\n          <br></br>\n          <br></br>\n          <div className=\"panel\">\n            <Toggleable\n              actionButtonLabel=\"Create a new blog\"\n              cancelButtonLabel=\"close &nbsp;&nbsp;‚úñÔ∏è\"\n              ref={blogFormRef}\n            >\n              <CreateBlog createBlog={createBlog} setSuccess={setSuccess} />\n            </Toggleable>\n          </div>\n          <div id=\"blogs\">\n            {sortedBlogs.map(blog => (\n              <Blog\n                blog={blog}\n                likeBlog={likeBlog}\n                deleteBlog={deleteBlog}\n                key={blog.id}\n                user={user}\n              />\n            ))}\n          </div>\n        </>\n      )}\n    </>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\n\nimport App from './components/App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}